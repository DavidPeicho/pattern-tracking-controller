//
// Created by leo on 4/19/17.
//

#pragma once 

#include <opencv2/core/mat.hpp>
#include "interest-point.hpp"

namespace ptc {

  namespace surf {

    class Surf {
      public:
      Surf(cv::Mat &img) : _img(img) {}

      public:
      void launch();

      private:
      void computeOrientations();

      private:
      float haarX(int row, int column, int s);
      float haarY(int row, int column, int s);
      float getAngle(float X, float Y);

      private:
      cv::Mat &_img;
      std::vector<InterestPoint> _interestPoints;

    };

    const double gauss25 [7][7] = {
        0.02350693969273,0.01849121369071,0.01239503121241,0.00708015417522,0.00344628101733,0.00142945847484,0.00050524879060,
        0.02169964028389,0.01706954162243,0.01144205592615,0.00653580605408,0.00318131834134,0.00131955648461,0.00046640341759,
        0.01706954162243,0.01342737701584,0.00900063997939,0.00514124713667,0.00250251364222,0.00103799989504,0.00036688592278,
        0.01144205592615,0.00900063997939,0.00603330940534,0.00344628101733,0.00167748505986,0.00069579213743,0.00024593098864,
        0.00653580605408,0.00514124713667,0.00344628101733,0.00196854695367,0.00095819467066,0.00039744277546,0.00014047800980,
        0.00318131834134,0.00250251364222,0.00167748505986,0.00095819467066,0.00046640341759,0.00019345616757,0.00006837798818,
        0.00131955648461,0.00103799989504,0.00069579213743,0.00039744277546,0.00019345616757,0.00008024231247,0.00002836202103
    };

  }

}


